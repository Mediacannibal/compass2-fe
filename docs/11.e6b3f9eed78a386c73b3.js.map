{"version":3,"sources":["webpack:///./src/utils/headers.js","webpack:///./src/store/Store.ts","webpack:///./src/utils/api/getlevel.ts","webpack:///./src/utils/api/postlevel.ts","webpack:///./src/utils/api/editlevel.ts","webpack:///./src/utils/api/deletelevel.ts","webpack:///./src/store/levelStore.ts"],"names":["headers","auth","JSON","parse","Store","initialValue","this","_state","index","subscribers","id","oldVal","newVal","newValue","Function","pingSubscribers","callback","currentIndex","useStore","store","useState","state","value","setValue","useLayoutEffect","subscribe","update","getlevel","axios","get","String","localStorage","getItem","postlevel","data","post","editlevel","put","deletelevel","levelStore","levelstore","level","setlevel","loadlevel","then","console","log","results","loadlevelwithid","res","oldArray","err","oldarr","map","obj","x","l_level","instance_id","l_icon","l_qrcode","l_title","l_stitle","l_body","l_bodytype","l_bodyoptions","locations","l_media","l_misc","filter","ele"],"mappings":"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","file":"11.e6b3f9eed78a386c73b3.js","sourcesContent":["/**\r\n * Created by rozer on 8/16/2018.\r\n */\r\n\r\n\r\nconst headers = (auth) => {\r\n   return ({\r\n      'Accept': 'application/json',\r\n      'Authorization': auth ? `Token ${JSON.parse(auth)}` : '',\r\n   })\r\n};\r\n\r\n\r\n\r\nexport default headers\r\n","import { useLayoutEffect, useState } from \"react\";\r\n\r\ntype Subscriber<T> = (oldVal: T, newVal: T) => any;\r\n\r\nexport class Store<T> {\r\n    private _state: T;\r\n    private subscribers: { [k: number]: Subscriber<T> };\r\n    private index: number;\r\n    private static id: number = 0;\r\n    id: number;\r\n\r\n    constructor(initialValue: T) {\r\n        this._state = initialValue;\r\n        this.index = 0;\r\n        this.subscribers = {};\r\n        this.id = Store.id++;\r\n    }\r\n\r\n    private pingSubscribers(oldVal: T, newVal: T) {\r\n        for (let id in this.subscribers) {\r\n            this.subscribers[id](oldVal, newVal);\r\n        }\r\n    }\r\n\r\n    update(newValue: ((old: T) => T) | T) {\r\n        let newVal: T;\r\n        if (newValue instanceof Function) {\r\n            newVal = newValue(this._state);\r\n        }\r\n        else {\r\n            newVal = newValue;\r\n        }\r\n        const oldVal = this._state;\r\n\r\n        this._state = newVal;\r\n        this.pingSubscribers(oldVal, newVal);\r\n\r\n        return newVal;\r\n    }\r\n\r\n    /**subscribe to the store. @callback is called with [oldVal, and newVal] @returns a function that unsubscribes */\r\n    subscribe(callback: Subscriber<T>) {\r\n        const currentIndex = ++this.index;\r\n\r\n        this.subscribers[currentIndex] = callback;\r\n\r\n        const subscribers = this.subscribers;\r\n        return function unsubscribe() {\r\n            delete subscribers[currentIndex];\r\n        }\r\n    }\r\n\r\n    get state() {\r\n        return this._state;\r\n    }\r\n}\r\n\r\nexport function useStore<T>(store: Store<T>) {\r\n    const [value, setValue] = useState(store.state);\r\n\r\n    useLayoutEffect(() => {\r\n        const unsubscribe = store.subscribe((oldVal, newVal) => {\r\n            setValue(newVal);\r\n        });\r\n        return unsubscribe\r\n    }, [store.id]);\r\n\r\n\r\n    const newSetValue = (newVal: T | ((old: T) => T)) => {\r\n        store.update(newVal);\r\n    }\r\n    const returnVal : [T, (newVal: T | ((old: T) => T)) => void] = [value,newSetValue];\r\n    return returnVal;\r\n}\r\n\r\nexport function useStores<T>(stores: { [k: string]: Store<T> }):\r\n    [\r\n        { [k: string]: T },\r\n        (\r\n            id: string,\r\n            newVal: T | ((old: T) => T)\r\n        ) => void\r\n    ] {\r\n    const [values, setValues] = useState(() => Object.fromEntries(Object.entries(stores).map(([id, store]) => [id, store.state])));\r\n    const ids = [Object.entries(stores).map(item => item[1].id)];\r\n\r\n    useLayoutEffect(() => {\r\n        // console.log(\"stores has changed\")\r\n        const unsubscribes = Object.entries(stores).map(([id, store]) => store.subscribe((oldVal, newVal) => {\r\n            setValues((oldValues) => ({ ...oldValues, [id]: newVal }));\r\n        }));\r\n\r\n        return () => unsubscribes.forEach(item => item());\r\n    }, [ids.join(\"-\")]);\r\n\r\n\r\n    const setNewValue = (id: string, newVal: T | ((old: T) => T)) => {\r\n        stores[id].update(newVal)\r\n    }\r\n\r\n    const returnVal : [{[k: string]: T}, ((id: string, newVal: T | ((old: T) => T)) => void)] =  [values, setNewValue];\r\n\r\n    return returnVal;\r\n}","import axios from '../axios';\r\nimport headers from '../headers';\r\n\r\nconst getlevel = async (id: any) => {\r\n\r\n    return (await axios.get(`api/v1/appdata/level/info/?instance_id=${id}`, { \"headers\": headers(String(localStorage.getItem(\"AuthToken\"))) }));\r\n};\r\n\r\nexport default getlevel;","import axios from '../axios';\r\nimport headers from '../headers';\r\n\r\nconst postlevel = async (data: any) => {\r\n\r\n    return (await axios.post(`api/v1/appdata/level/info/`, data, { \"headers\": headers(String(localStorage.getItem(\"AuthToken\"))) }));\r\n};\r\n\r\nexport default postlevel;","import axios from '../axios';\r\nimport headers from '../headers';\r\n\r\nconst editlevel = async (id: any, data: any) => {\r\n\r\n    return (await axios.put(`api/v1/appdata/level/${id}/`, data, { \"headers\": headers(String(localStorage.getItem(\"AuthToken\"))) }));\r\n};\r\n\r\nexport default editlevel;","import axios from '../axios';\r\nimport headers from '../headers';\r\n\r\nconst deletelevel = async (id: any) => {\r\n\r\n    return (await axios.delete(`api/v1/appdata/level/${id}/`, { \"headers\": headers(String(localStorage.getItem(\"AuthToken\"))) }));\r\n};\r\n\r\nexport default deletelevel;","import { Store, useStore } from \"./Store\";\r\nimport getlevel from \"../utils/api/getlevel\";\r\nimport postlevel from \"../utils/api/postlevel\";\r\nimport editlevel from \"../utils/api/editlevel\";\r\nimport deletelevel from \"../utils/api/deletelevel\";\r\n\r\n\r\nexport class levelItem {\r\n\r\n    id: String;\r\n    l_level: String;\r\n    l_icon: String;\r\n    l_qrcode: String;\r\n    l_title: String;\r\n    l_stitle: String;\r\n    l_body: String;\r\n    l_bodytype: String;\r\n    l_bodyoptions: String;\r\n    locations: boolean;\r\n    l_media: String;\r\n    l_misc: String;\r\n    created_at: String;\r\n    updated_at: String;\r\n    instance_id: String;\r\n\r\n    constructor(o: {\r\n        id: String;\r\n        l_level: String;\r\n        l_icon: String;\r\n        l_qrcode: String;\r\n        l_title: String;\r\n        l_stitle: String;\r\n        l_body: String;\r\n        l_bodytype: String;\r\n        l_bodyoptions: String;\r\n        locations: boolean;\r\n        l_media: String;\r\n        l_misc: String;\r\n        created_at: String;\r\n        updated_at: String;\r\n        instance_id: String;\r\n    }) {\r\n        this.id = o.id;\r\n        this.l_level = o.l_level;\r\n        this.l_icon = o.l_icon;\r\n        this.l_qrcode = o.l_qrcode;\r\n        this.l_title = o.l_title;\r\n        this.l_stitle = o.l_stitle;\r\n        this.l_body = o.l_body;\r\n        this.l_bodytype = o.l_bodytype;\r\n        this.l_bodyoptions = o.l_bodyoptions;\r\n        this.locations = o.locations;\r\n        this.l_media = o.l_media;\r\n        this.l_misc = o.l_misc;\r\n        this.created_at = o.created_at;\r\n        this.updated_at = o.updated_at;\r\n        this.instance_id = o.instance_id;\r\n    }\r\n}\r\n\r\nexport const levelStore = new Store<levelItem[] | false>(false);\r\n\r\nexport const levelstore = () => {\r\n    const [level, setlevel] = useStore(levelStore);\r\n\r\n    return {\r\n        level, setlevel,\r\n\r\n        async loadlevel() {\r\n            await getlevel(\"\").then(\r\n                (data) => {\r\n                    console.log(\"kjsaksahdfadfasdfas\", data);\r\n                    setlevel(data.data.results);\r\n                }\r\n            )\r\n        },\r\n        async loadlevelwithid(id: any) {\r\n            await getlevel(id).then(\r\n                (data) => {\r\n                    console.log(\"kjsaksahdfadfasdfas\", data);\r\n                    setlevel(data.data.results);\r\n                }\r\n            )\r\n\r\n        },\r\n        async postlevel(data: any) {\r\n            await postlevel(data).then((res) => {\r\n                console.log(res);\r\n                setlevel((oldArray: any) => [...oldArray, res.data]);\r\n\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            })\r\n        },\r\n        async editlevel(id: any, data: any) {\r\n            await editlevel(id, data).then((res) => {\r\n                console.log(res);\r\n                setlevel((oldarr) => {\r\n                    return (oldarr) && oldarr.map((obj: any) => {\r\n                        const getobj = (o: any) => {\r\n                            let x = o;\r\n                            x.l_level = data.l_level\r\n                            x.instance_id = data.instance_id\r\n                            x.l_icon = data.l_icon\r\n                            x.l_qrcode = data.l_qrcode\r\n                            x.l_title = data.l_title\r\n                            x.l_stitle = data.l_stitle\r\n                            x.l_body = data.l_body\r\n                            x.l_bodytype = data.l_bodytype\r\n                            x.l_bodyoptions = data.l_bodyoptions\r\n                            x.locations = data.locations\r\n                            x.l_media = data.l_media\r\n                            x.l_misc = data.l_misc\r\n                            return x;\r\n                        }\r\n                        return (String(obj.id) === String(id)) ? getobj(obj) : obj;\r\n                    })\r\n                })\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            })\r\n        },\r\n        async deletelevel(id: any) {\r\n            await deletelevel(id).then((res) => {\r\n                console.log(res);\r\n                setlevel(level && level.filter(ele => ele.id !== id))\r\n            }).catch((res) => {\r\n                console.log(res);\r\n\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n}"],"sourceRoot":""}